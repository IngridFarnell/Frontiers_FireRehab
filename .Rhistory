a <- ggplot(FR_Sor_trees[Planted=="NP"], aes(x=TSF,y=CarbonMgHa))+
geom_point(colour="#E64B35B2", alpha = 0.1)+
geom_line(aes(y=NotPlanted_fits[[1]]$best_pars$parA +
(NotPlanted_fits[[1]]$best_pars$parB*TSF)),colour="black",size=1, linetype =2)+
geom_line(aes(y=(NotPlanted_fits[[7]]$best_pars$parA*
(1-exp(-1*NotPlanted_fits[[7]]$best_pars$parB*TSF))^NotPlanted_fits[[7]]$best_pars$parC)),
colour="black",size=1, linetype=1)+
scale_color_npg()+
scale_fill_npg()+
theme_minimal() +
ylab(expression("Carbon Mg" ~ ha^-1))+
xlab("Time since fire")+
ylim(0,200)+
theme(strip.text.x = element_text(face="bold"))
b <- ggplot(FR_Sor_trees[Planted=="P"], aes(x=TSF,y=CarbonMgHa))+
geom_point(colour="#4DBBD5B2", alpha=0.1)+
geom_line(aes(y=Planted_fits[[1]]$best_pars$parA +
(Planted_fits[[1]]$best_pars$parB*TSF)),colour="black",size=1, linetype=2)+
geom_line(aes(y=(Planted_fits[[7]]$best_pars$parA*
(1-exp(-1*Planted_fits[[7]]$best_pars$parB*TSF))^Planted_fits[[7]]$best_pars$parC)),
colour="black",size=1, linetype=1)+
scale_color_npg()+
scale_fill_npg()+
theme_minimal() +
ylab(expression("Carbon Mg" ~ ha^-1))+
xlab("Time since fire")+
ylim(0,200)+
theme(strip.text.x = element_text(face="bold"))
ggarrange(a,b)
source("./R/Functions.R")
source("./R/DensityFunctions.R")
PlotRegen <- RegenDensity(Regen)
PlotRegenSum <- PlotRegen[,sum(SPH),by=c("PlotID,Species")] #combine 0-0.3 and 0.3-1.3
setnames(PlotRegenSum,"V1","SPH")
FR_Regen <- merge(FR_treatments,PlotRegenSum,by.x="ID",by.y="PlotID")
FR_Regen[,TSF_cat:=ifelse(TimeSinceFire >50,55,
ifelse(TimeSinceFire >40,45,
ifelse(TimeSinceFire > 30, 35,
ifelse(TimeSinceFire>20,25,
ifelse(TimeSinceFire>10,15,
5)))))]
supp.labs <- c("Not planted","Planted")
names(supp.labs) <- c("NP","P")
FR_Regen[,Species:= ifelse(Species=="Lw","Larch",
ifelse(Species=="Ac","Cottonwood",
ifelse(Species=="At","Aspen",
ifelse(Species=="Bl","Fir",
ifelse(Species =="Sx","Spruce",
ifelse(Species=="Pl","Pine",
ifelse(Species=="Fd","DouglasFir",
ifelse(Species=="Ep","Birch",Species))))))))]
FR_Regen[,ConDec:=ifelse(Species=="Larch"|Species=="Fir"|Species=="Spruce"|Species=="Pine"|
Species=="DouglasFir","Conifer","Deciduous")]
ggplot(FR_Regen[SPH>0],aes(x=TimeSinceFire, y=SPH, color=Planted))+
geom_point(size=4, position="jitter", alpha=0.5)+
scale_y_log10()+
scale_color_npg()+
#scale_color_brewer(palette="Dark2")+
ylab("Seedlings/ha (log scale)")+
xlab("Time Since Fire")+
#facet_wrap(~Planted,ncol=2,labeller=labeller(Planted=supp.labs))+
facet_wrap(~Species,ncol=3)+
theme_minimal() +
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen[SPH>0],aes(x=TimeSinceFire, y=SPH, color=Planted))+
geom_point(size=4, position="jitter", alpha=0.5)+
scale_y_log10()+
scale_color_npg()+
ylab(expression("Carbon Mg" ~ ha^-1))+
xlab("Time Since Fire")+
facet_wrap(~Species,ncol=3)+
theme_minimal() +
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen[SPH>0],aes(x=TimeSinceFire, y=SPH, color=Planted))+
geom_point(size=4, position="jitter", alpha=0.5)+
scale_y_log10()+
scale_color_npg()+
ylab(expression("Seedlings" ~ ha^-1 ~ "(log scale"))+
#ylab("Seedlings/ha (log scale)")+
xlab("Time Since Fire")+
facet_wrap(~Species,ncol=3)+
theme_minimal() +
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen[SPH>0],aes(x=TimeSinceFire, y=SPH, color=Planted))+
geom_point(size=4, position="jitter", alpha=0.5)+
scale_y_log10()+
scale_color_npg()+
ylab(expression("Seedlings" ~ ha^-1 ~ "(log scale)"))+
#ylab("Seedlings/ha (log scale)")+
xlab("Time Since Fire")+
facet_wrap(~Species,ncol=3)+
theme_minimal() +
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen[SPH>0],aes(x=TimeSinceFire, y=SPH, color=Planted))+
geom_point(size=4, position="jitter", alpha=0.5)+
scale_y_log10()+
scale_color_npg()+
ylab(expression("Seedlings" ~ ha^-1 ~ "(log scale)"))+
#ylab("Seedlings/ha (log scale)")+
xlab("Time Since Fire")+
facet_wrap(~Species,ncol=3)+
#theme_minimal() +
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen[SPH>0],aes(x=TimeSinceFire, y=SPH, color=Planted))+
geom_point(size=4, position="jitter", alpha=0.5)+
scale_y_log10()+
scale_color_npg()+
ylab(expression("Seedlings" ~ ha^-1 ~ "(log scale)"))+
#ylab("Seedlings/ha (log scale)")+
xlab("Time Since Fire")+
facet_wrap(~Species,ncol=3)+
theme_minimal() +
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen[SPH>0],aes(x=TimeSinceFire, y=SPH, color=Planted))+
geom_point(size=4, position="jitter", alpha=0.5)+
scale_y_log10()+
scale_color_npg()+
ylab(expression("Seedlings" ~ ha^-1 ~ "(log scale)"))+
#ylab("Seedlings/ha (log scale)")+
xlab("Time Since Fire")+
facet_wrap(~Species,ncol=3)+
panel.border=element_rect(colour="black",size=1)+
theme_minimal() +
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen[SPH>0],aes(x=TimeSinceFire, y=SPH, color=Planted))+
geom_point(size=4, position="jitter", alpha=0.5)+
scale_y_log10()+
scale_color_npg()+
ylab(expression("Seedlings" ~ ha^-1 ~ "(log scale)"))+
#ylab("Seedlings/ha (log scale)")+
xlab("Time Since Fire")+
facet_wrap(~Species,ncol=3)+
theme(panel.border=element_rect(colour="black",size=1))+
theme_minimal() +
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen[SPH>0],aes(x=TimeSinceFire, y=SPH, color=Planted))+
geom_point(size=4, position="jitter", alpha=0.5)+
scale_y_log10()+
scale_color_npg()+
ylab(expression("Seedlings" ~ ha^-1 ~ "(log scale)"))+
#ylab("Seedlings/ha (log scale)")+
xlab("Time Since Fire")+
facet_wrap(~Species,ncol=3)+
theme(panel.border=element_rect(colour="black",size=1))+
#theme_minimal() +
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen[SPH>0],aes(x=TimeSinceFire, y=SPH, color=Planted))+
geom_point(size=4, position="jitter", alpha=0.5)+
scale_y_log10()+
scale_color_npg()+
ylab(expression("Seedlings" ~ ha^-1 ~ "(log scale)"))+
#ylab("Seedlings/ha (log scale)")+
xlab("Time Since Fire")+
facet_wrap(~Species,ncol=3)+
#theme(panel.border=element_rect(colour="black",size=1))+
theme_minimal(panel.border=element_rect(colour="black",size=1)) +
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
?theme_minimal
ggplot(FR_Regen[SPH>0],aes(x=TimeSinceFire, y=SPH, color=Planted))+
geom_point(size=4, position="jitter", alpha=0.5)+
scale_y_log10()+
scale_color_npg()+
ylab(expression("Seedlings" ~ ha^-1 ~ "(log scale)"))+
#ylab("Seedlings/ha (log scale)")+
xlab("Time Since Fire")+
facet_wrap(~Species,ncol=3)+
#theme(panel.border=element_rect(colour="black",size=1))+
theme_minimal(base_line_size = base_size/22) +
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen[SPH>0],aes(x=TimeSinceFire, y=SPH, color=Planted))+
geom_point(size=4, position="jitter", alpha=0.5)+
scale_y_log10()+
scale_color_npg()+
ylab(expression("Seedlings" ~ ha^-1 ~ "(log scale)"))+
#ylab("Seedlings/ha (log scale)")+
xlab("Time Since Fire")+
facet_wrap(~Species,ncol=3)+
#theme(panel.border=element_rect(colour="black",size=1))+
theme_light() +
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen[SPH>0],aes(x=TimeSinceFire, y=SPH, color=Planted))+
geom_point(size=4, position="jitter", alpha=0.5)+
scale_y_log10()+
scale_color_npg()+
ylab(expression("Seedlings" ~ ha^-1 ~ "(log scale)"))+
#ylab("Seedlings/ha (log scale)")+
xlab("Time Since Fire")+
facet_wrap(~Species,ncol=3)+
#theme(panel.border=element_rect(colour="black",size=1))+
theme_bw() +
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen[SPH>0],aes(x=TimeSinceFire, y=SPH, color=Planted))+
geom_point(size=4)+
scale_y_log10()+
#geom_smooth(method="lm")+
facet_wrap(~Species)
ggplot(FR_Regen[Species=="Aspen"|Species=="Fir"|Species=="Pine"|Species=="Spruce"])+
geom_point(aes(x=TimeSinceFire,y=SPH, colour=Planted))+
geom_smooth(aes(x=TimeSinceFire,y=SPH, colour=Planted),method="lm")+
scale_color_npg()+
scale_y_log10()+
facet_wrap(~Species)+
theme_minimal() +
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen[Species=="Aspen"|Species=="Fir"|Species=="Pine"|Species=="Spruce"])+
geom_boxplot(aes(x=Species,y=SPH))+
scale_y_log10()+
facet_wrap(~Planted)
ggplot(FR_Regen,aes(x=Species,y=Reg_PA, fill=Planted))+
geom_col()+
facet_wrap(~Planted)
FR_Regen[,Reg_PA:=ifelse(SPH>0,1,0)]
ggplot(FR_Regen,aes(x=Species,y=Reg_PA, fill=Planted))+
geom_col()+
facet_wrap(~Planted)
ggplot(FR_Regen[Species=="Aspen"|Species=="Fir"|Species=="Pine"|Species=="Spruce"])+
geom_boxplot(aes(x=Species,y=SPH))+
scale_y_log10()+
facet_wrap(~Planted)
ggplot(FR_Regen[Species=="Aspen"|Species=="Fir"|Species=="Pine"|Species=="Spruce"])+
geom_point(aes(x=TimeSinceFire,y=SPH, colour=Planted))+
geom_smooth(aes(x=TimeSinceFire,y=SPH, colour=Planted),method="lm")+
scale_color_npg()+
scale_y_log10()+
facet_wrap(~Species)+
theme_minimal() +
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen[Species=="Aspen"|Species=="Fir"|Species=="Pine"|Species=="Spruce"])+
geom_boxplot(aes(x=Species,y=SPH))+
scale_y_log10()+
facet_wrap(~Planted)
ggplot(FR_Regen[SPH>0],aes(x=TimeSinceFire, y=SPH, color=Planted))+
geom_point(size=4, position="jitter", alpha=0.5)+
scale_y_log10()+
scale_color_npg()+
ylab(expression("Seedlings" ~ ha^-1 ~ "(log scale)"))+
xlab("Time Since Fire")+
facet_wrap(~Species,ncol=3)+
#theme(panel.border=element_rect(colour="black",size=1))+
theme_bw() +
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen[Species=="Aspen"|Species=="Fir"|Species=="Pine"|Species=="Spruce"])+
geom_boxplot(aes(x=Species,y=SPH))+
scale_y_log10()+
facet_wrap(~Planted)
ggplot(FR_Regen[Species=="Aspen"|Species=="Fir"|Species=="Pine"|Species=="Spruce"])+
geom_boxplot(aes(x=TimeSinceFire,y=SPH, colour=Planted))+
scale_y_log10()+
facet_wrap(~Planted)
ggplot(FR_Regen[Species=="Aspen"|Species=="Fir"|Species=="Pine"|Species=="Spruce"])+
geom_boxplot(aes(x=TSF_cat,y=SPH, colour=Planted))+
scale_y_log10()+
facet_wrap(~Planted)
ggplot(FR_Regen)+
geom_boxplot(aes(x=TSF_cat,y=SPH, colour=Planted))+
scale_y_log10()+
facet_wrap(~Planted)
ggplot(FR_Regen)+
geom_boxplot(aes(x=TSF_cat,y=SPH, fill=Planted))+
scale_y_log10()+
facet_wrap(~Planted)
ggplot(FR_Regen)+
geom_boxplot(aes(x=TSF_cat,y=SPH, fill=Planted))+
scale_color_npg()+
scale_y_log10()+
theme_minimal()+
facet_wrap(~Planted)
ggplot(FR_Regen)+
geom_boxplot(aes(x=TSF_cat,y=SPH, fill=Planted))+
scale_color_npg()+
scale_y_log10()+
theme_minimal()+
facet_wrap(~Planted)+
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen[Species=="Aspen"|Species=="Fir"|Species=="Pine"|Species=="Spruce"])+
geom_point(aes(x=TimeSinceFire,y=SPH, colour=Planted))+
geom_smooth(aes(x=TimeSinceFire,y=SPH, colour=Planted),method="lm")+
scale_color_npg()+
scale_y_log10()+
facet_wrap(~Species)+
theme_minimal() +
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen)+
geom_boxplot(aes(x=TSF_cat,y=SPH, fill=Planted))+
scale_color_npg()+
scale_y_log10()+
theme_minimal()+
facet_grid(rows="Planted",labeller=labeller(Planted=supp.labs))+
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen)+
geom_boxplot(aes(x=TSF_cat,y=SPH, fill=Planted))+
scale_color_npg()+
scale_y_log10()+
theme_minimal()+
facet_grid(cols="Planted",labeller=labeller(Planted=supp.labs))+
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen)+
geom_boxplot(aes(x=TSF_cat,y=SPH, fill=Planted))+
scale_color_npg()+
scale_y_log10()+
theme_minimal()+
facet_grid(col="Planted",labeller=labeller(Planted=supp.labs))+
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen)+
geom_boxplot(aes(x=TSF_cat,y=SPH, fill=Planted))+
scale_color_npg()+
scale_y_log10()+
theme_minimal()+
facet_grid(cols="Planted",labeller=labeller(Planted=supp.labs))+
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
FR_Regen
str(FR_Regen)
FR_Regen[,as.factor(TSF_cat:=ifelse(TimeSinceFire >50,55,
ifelse(TimeSinceFire >40,45,
ifelse(TimeSinceFire > 30, 35,
ifelse(TimeSinceFire>20,25,
ifelse(TimeSinceFire>10,15,
5))))))]
FR_Regen[,TSF_cat:=as.factor(ifelse(TimeSinceFire >50,55,
ifelse(TimeSinceFire >40,45,
ifelse(TimeSinceFire > 30, 35,
ifelse(TimeSinceFire>20,25,
ifelse(TimeSinceFire>10,15,
5))))))]
supp.labs <- c("Not planted","Planted")
names(supp.labs) <- c("NP","P")
FR_Regen[,Species:= ifelse(Species=="Lw","Larch",
ifelse(Species=="Ac","Cottonwood",
ifelse(Species=="At","Aspen",
ifelse(Species=="Bl","Fir",
ifelse(Species =="Sx","Spruce",
ifelse(Species=="Pl","Pine",
ifelse(Species=="Fd","DouglasFir",
ifelse(Species=="Ep","Birch",Species))))))))]
FR_Regen[,ConDec:=ifelse(Species=="Larch"|Species=="Fir"|Species=="Spruce"|Species=="Pine"|
Species=="DouglasFir","Conifer","Deciduous")]
ggplot(FR_Regen[SPH>0],aes(x=TimeSinceFire, y=SPH, color=Planted))+
geom_point(size=4, position="jitter", alpha=0.5)+
scale_y_log10()+
scale_color_npg()+
ylab(expression("Seedlings" ~ ha^-1 ~ "(log scale)"))+
xlab("Time Since Fire")+
facet_wrap(~Species,ncol=3)+
#theme(panel.border=element_rect(colour="black",size=1))+
theme_bw() +
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen)+
geom_boxplot(aes(x=TSF_cat,y=SPH, fill=Planted))+
scale_color_npg()+
scale_y_log10()+
theme_minimal()+
facet_grid(cols="Planted",labeller=labeller(Planted=supp.labs))+
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen)+
geom_boxplot(aes(x=TSF_cat,y=SPH, fill=Planted))+
scale_color_npg()+
scale_y_log10()+
theme_minimal()+
facet_wrap(~Planted)+
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
ggplot(FR_Regen[SPH>0])+
geom_boxplot(aes(x=TSF_cat,y=SPH, fill=Planted))+
scale_color_npg()+
scale_y_log10()+
theme_minimal()+
facet_wrap(~Planted)+
theme(legend.position = "bottom")+
theme(strip.text.x = element_text(face="bold"))
citation("car")
FR_pools <- FR_treatments[,.(ID,Planted,TimeSinceFire,TotalCarbon,LiveCarbon,DeadCarbon,ForestFloorTotC,MinSoilC_Mgha)]
FR_pools[,Planted:=ifelse(Planted=="NP","Not planted", "Planted")]
FR_pools[,TSF_cat:=ifelse(TimeSinceFire >50,55,
ifelse(TimeSinceFire >40,45,
ifelse(TimeSinceFire > 30, 35,
ifelse(TimeSinceFire>20,25,
ifelse(TimeSinceFire>10,15,
5)))))]
FR_pools_m <- melt(FR_pools,id.vars = c("ID","Planted","TSF_cat"),
measure.vars = c("LiveCarbon","DeadCarbon","ForestFloorTotC","MinSoilC_Mgha"),
variable.name = "CarbonPool",
value.name = "CarbonMgHa")
table(FR_pools_m[,.(Planted,TSF_cat)])
FR_means <- FR_pools_m[,.(mn_CarbonMgHa=mean(CarbonMgHa),sd_CarbonMgHa=sd(CarbonMgHa)),
by=c("CarbonPool","Planted","TSF_cat")]
ggplot(FR_means)+
geom_area(aes(x=TSF_cat,y=mn_CarbonMgHa,fill=CarbonPool))+
facet_grid(rows="Planted")+
scale_fill_npg(name="Carbon Pool",labels=c("Live","Dead","Forest floor","Mineral soil"))+
scale_color_npg()+
ylab(expression("Carbon Mg" ~ ha^-1))+
xlab("Time since fire")+
theme_minimal()
knitr::opts_chunk$set(echo = TRUE)
library(knitr)
library(sf)
library(data.table)
library(rsq)
library(car)
library(dplyr)
library(ggplot2)
library(ggpubr)
library(raster)
library(lme4)
library(lmerTest)
library(MuMIn)
library(soiltexture)
library("stringr")
library(xml2)
library(tidyr)
library(ggsci)
source("./R/CarbonFunctions.R")
source("../r-SORTIE/ParseXML.R")
source("../r-SORTIE/Functions.R")
source("../r-SORTIE/ReplaceInfo.R")
source("../r-SORTIE/SORTIE-HelperFunctions.R")
dbhclassSize <- 2
diamClasses <- seq(0,ceiling(max(na.omit(A1B1trees[,DBH]))+dbhclassSize), by=dbhclassSize)
for(j in 1:length(diamClasses)){
A1B1trees[DBH <= diamClasses[j] & DBH > diamClasses[j]-dbhclassSize,DBH_bin := diamClasses[j]]
}
A1trees <- fread("./Inputs/A1trees.csv")
B1trees <- fread("./Inputs/B1trees.csv")
Regen <- fread("./Inputs/Regen.csv")
FR_treatments <- fread(paste0(DatPath,"FR_treatments.csv")) # has field plot assessed treatments and fire year
FR_treatments <- fread("./Inputs/FR_treatments.csv") # has field plot assessed treatments and fire year
FR_treatments[,TimeSinceFire := 2020 - FIRE_YEAR] # Calculate the time since fire when measurements happened
InitRootName <- "Init.Dens_"
InitTreesPath <- "./Inputs/SORTIEInits/"
dbhclassSize <- 2 #define diameter class size and number of classes
diamClasses <- seq(0,40, by=dbhclassSize)
Run_type <- "OldGrowth"
PlotTrees <- TreeDensity(A1trees,B1trees)
PlotTrees[,SO_sp:=ifelse(Species=="Lw","Western_Larch", #grow larch as spruce
ifelse(Species=="Fd","Douglas_Fir", #grow Doug fir as spruce
ifelse(Species=="Bl","Subalpine_Fir",
ifelse(Species =="Sx","Interior_Spruce",
ifelse(Species=="Pl","Lodgepole_Pine",
ifelse(Species=="At","Trembling_Aspen",
ifelse(Species=="Ac","Black_Cottonwood",
ifelse(Species=="Ep","Paper_Birch",Species))))))))]
PlotTrees[,Init.Values := as.factor(paste0(InitRootName, formatC(as.numeric(DBH_bin),
width=3,format='f',digits=1)))]
source("./R/DensityFunctions.R")
PlotTrees <- TreeDensity(A1trees,B1trees)
PlotTrees[,SO_sp:=ifelse(Species=="Lw","Western_Larch", #grow larch as spruce
ifelse(Species=="Fd","Douglas_Fir", #grow Doug fir as spruce
ifelse(Species=="Bl","Subalpine_Fir",
ifelse(Species =="Sx","Interior_Spruce",
ifelse(Species=="Pl","Lodgepole_Pine",
ifelse(Species=="At","Trembling_Aspen",
ifelse(Species=="Ac","Black_Cottonwood",
ifelse(Species=="Ep","Paper_Birch",Species))))))))]
PlotTrees[,Init.Values := as.factor(paste0(InitRootName, formatC(as.numeric(DBH_bin),
width=3,format='f',digits=1)))]
Regen[,Height_class:=`Height_class(cm)`][,`Height_class(cm)`:=NULL]
PlotRegen <- RegenDensity(Regen) #run RegenDensity function
PlotRegen[,SO_sp:=ifelse(Species=="Lw","Western_Larch", #grow larch as spruce
ifelse(Species=="Fd","Douglas_Fir", #grow Doug fir as spruce
ifelse(Species=="Bl","Subalpine_Fir",
ifelse(Species =="Sx","Interior_Spruce",
ifelse(Species=="Pl","Lodgepole_Pine",
ifelse(Species=="At","Trembling_Aspen",
ifelse(Species=="Ac","Black_Cottonwood",
ifelse(Species=="Ep","Paper_Birch",Species))))))))]
PlotRegen[,Init.Values := as.factor(paste0("Init_Sdl_Hgt_",SdlHgt))]
PlotList <- c(paste0("FR0",seq(1,9,by=1)),paste0("FR",seq(10,75,by=1)))
BlankSortie <- data.table(Init.Values = as.factor(paste0(InitRootName, formatC(as.numeric(diamClasses[diamClasses>0]),
width=3,format='f',digits=1))),
"Interior_Spruce"=0,"Lodgepole_Pine"=0,"Subalpine_Fir"=0,"Trembling_Aspen"=0,
"Western_Larch"=0,"Douglas_Fir"=0,"Black_Cottonwood"=0,"Paper_Birch"=0)
xmls_path <- "./Inputs/SORTIEInits/"
param_path <- "./Inputs/SORTIEInits/"
if(Run_type == "FireReturn"){
lstFiles <- data.table(type=c(0,rep(1,75)),name=c("SBS-01.xml",
c(paste0(c(paste0("FR0",seq(1,9,by=1)),paste0("FR",seq(10,75,by=1))),
"Inits.csv"))))
}else{
lstFiles <- data.table(type=c(0,rep(1,75)),name=c("SBS-01.xml",
c(paste0(c(paste0("FR0",seq(1,9,by=1)),paste0("FR",seq(10,75,by=1))),
"Inits250.csv"))))
}
lstFiles
VariableNames <- read.csv("./Inputs/SORTIEInits/VariableNames.csv", header=TRUE, strip.white = TRUE)
VariableNames <- read.csv("./Inputs/VariableNames.csv", header=TRUE, strip.white = TRUE)
dt_table <- data.table()
whichID250 <- grep("Inits250_det_0",list.files("E:/SORTIE_runs/SortieExtract/"), value=TRUE)
whichID250
